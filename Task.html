<!DOCTYPE html>
<html>
<head>
  <!--Stylesheets-------------------------------------------------------------->
  <link rel="stylesheet" href="css/Task.css" type="text/css">
</head>

<body>
  <!--JS Libraries------------------------------------------------------------->
  <script type="text/javascript" src="jslib/jquery-3.2.1.js"></script>
  <script type="text/javascript" src="jslib/math.js"></script>
  <script type="text/javascript" src="jslib/images.js"></script>
  <script type="text/javascript" src="jslib/setinitial.js"></script>

  <!--JS Functions------------------------------------------------------------->
  <script type="text/javascript" src="jsfunc/Common.js"></script>
  <script type="text/javascript" src="jsfunc/RunTrial.js"></script>
  <script type="text/javascript" src="jsfunc/Presentation.js"></script>
  <script type="text/javascript" src="jsfunc/TrialMatrix.js"></script>

  <!--Inline JS Run------------------------------------------------------------>
  <script type="text/javascript">


  $(document).ready(function(){
    //$("#form").hide();
    c = document.getElementById("myCanvas");
    ctx = c.getContext("2d");
    myCanvas = document.getElementById("myCanvas");

    //define each css click element
    document.getElementById('category1').addEventListener("click", function() {
        if (buttoncolor[0] != 'black'){
            d1 = new Date();
            onset2 = d1.getTime() - runStart;
            respTime = (d1.getTime() - runStart) - onset;
            data[logCounter] = ["SMC:", i, onset, onset2, 1, respTime,trialmatrix[0][i],
                trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
            logCounter++;
            clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 1; showpicture(1, IMAGEstudyinterval);
        }
    });
    document.getElementById('category2').addEventListener("click", function() {
        if (buttoncolor[1] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 2, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 2; showpicture(2, IMAGEstudyinterval);}});
    document.getElementById('category3').addEventListener("click", function() {
        if (buttoncolor[2] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 3, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 3; showpicture(3, IMAGEstudyinterval);}});
    document.getElementById('category4').addEventListener("click", function() {
        if (buttoncolor[3] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 4, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 4; showpicture(4, IMAGEstudyinterval);}});
    document.getElementById('category5').addEventListener("click", function() {
        if (buttoncolor[4] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 5, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 5; showpicture(5, IMAGEstudyinterval);}});
    document.getElementById('category6').addEventListener("click", function() {
        if (buttoncolor[5] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 6, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 6; showpicture(6, IMAGEstudyinterval);}});
    document.getElementById('category7').addEventListener("click", function() {
        if (buttoncolor[6] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 7, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 7; showpicture(7, IMAGEstudyinterval);}});
    document.getElementById('category8').addEventListener("click", function() {
        if (buttoncolor[7] != 'black'){
        d1 = new Date();
        onset2 = d1.getTime() - runStart;
        respTime = (d1.getTime() - runStart) - onset;
        data[logCounter] = ["SMC:", i, onset, onset2, 8, respTime,trialmatrix[0][i],
            trialmatrix[1][i],trialmatrix[2][i],withinsubs_random, 9999, 9999];
        logCounter++;
        clearTimeout(timeoutIMAGE); stimscreencount = 1; categorychoice = 8; showpicture(8, IMAGEstudyinterval);}});

    document.getElementById('category1_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 0, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category2_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 1, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category3_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 2, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category4_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 3, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category5_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 4, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category6_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 5, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category7_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 6, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});
    document.getElementById('category8_test').addEventListener("click", function() {
        d1 = new Date();
      respTime = (d1.getTime() - runStart) - onset;
      data[logCounter] = ["SR:", i, onset, object, 7, respTime,
      trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
      9999, 9999];
      logCounter++;
      clearTimeout(timeoutIMAGE); stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('Example').addEventListener("click", function() {stimscreencount = 1; slow = 1; $("#Example").hide(); iti_screen();});
    document.getElementById('Start').addEventListener("click", function() {stimscreencount = 1; $("#Start").hide(); slow = 1; iti_screen();});
    document.getElementById('Start2').addEventListener("click", function() {stimscreencount = 2; $("#Start").hide(); slow = 1; iti_screen_transition();});
    //document.getElementById('Start3').addEventListener("click", function() {stimscreencount = 1; $("#Start3").hide(); slow = 1; iti_screen();});
    //document.getElementById('Start4').addEventListener("click", function() {stimscreencount = 1; $("#Start4").hide(); slow = 1; iti_screen();});
    //document.getElementById('Start5').addEventListener("click", function() {stimscreencount = 1; $("#Start5").hide(); slow = 1; iti_screen();});

    document.getElementById('likert1').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 1, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert2').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 2, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert3').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 3, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert4').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 4, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert5').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 5, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert6').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 6, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert7').addEventListener("click", function()
    {$("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    data[logCounter] = ["Q4:", i, onset, object, 7, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert11').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 1, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert21').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 2, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert31').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 3, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert41').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 4, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert51').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 5, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert61').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 6, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});

    document.getElementById('likert71').addEventListener("click", function()
    {$("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();
    data[logCounter] = ["Q5:", i, onset, object, 7, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    9999, 9999];
    logCounter++; stimscreencount = 1; slow = 1; iti_screen();});


    //Start stuff
    $("#info").hide();
    $("#form").hide();
    $('#button').hide();
    $("#mturk_form").hide();
    d1 = new Date();
    runStart = d1.getTime();

    //hide buttons
    $("#Start").hide();
    $("#Start2").hide();
    $("#Start3").hide();
    $("#Start4").hide();
    $("#Start5").hide();
    $("#Start6").hide();
    $("#Start7").hide();
    $("#Example").hide();
    $("#myRange").hide();
    $("#textInput").hide();
    $("#myRange2").hide();
    $("#myRange3").hide();
    $("#textInput2").hide();
    $("#interleaved").hide();
    $("#blocked").hide();

    $("#likert1").hide();
    $("#likert2").hide();
    $("#likert3").hide();
    $("#likert4").hide();
    $("#likert5").hide();
    $("#likert6").hide();
    $("#likert7").hide();
    $("#likert11").hide();
    $("#likert21").hide();
    $("#likert31").hide();
    $("#likert41").hide();
    $("#likert51").hide();
    $("#likert61").hide();
    $("#likert71").hide();

    $("#category1").hide();
    $("#category2").hide();
    $("#category3").hide();
    $("#category4").hide();
    $("#category5").hide();
    $("#category6").hide();
    $("#category7").hide();
    $("#category8").hide();

    $("#category1_test").hide();
    $("#category2_test").hide();
    $("#category3_test").hide();
    $("#category4_test").hide();
    $("#category5_test").hide();
    $("#category6_test").hide();
    $("#category7_test").hide();
    $("#category8_test").hide();

    $("#category1_dummy").hide();
    $("#category2_dummy").hide();
    $("#category3_dummy").hide();
    $("#category4_dummy").hide();
    $("#category5_dummy").hide();
    $("#category6_dummy").hide();
    $("#category7_dummy").hide();
    $("#category8_dummy").hide();

    $("#StateEntry").hide();
    $("#StateEntryButton").hide();

    //first js function to run
    loadImage(createTrialMatrix)

          });

        </script>
      </body>
        <table>
          <tr>
            <td>
              <div class="canvas-container">
                <canvas id='myCanvas' width='900' height='900'></canvas>
                <button id='Start'>Begin Task</button>
                <button id='Start2'>Next</button>
                <button id='Start3'>Next</button>
                <button id='Start4'>Next</button>
                <button id='Start5'>Next</button>
                <button id='Start6'>Next</button>
                <button id='Start7'>Next</button>
                <button id='Example'>Begin Task</button>
                <button id='interleaved'>Interleaved</button>
                <button id='blocked'>Blocked</button>
                <button id='likert1'>Very Difficult</button>
                <button id='likert2'>Difficult</button>
                <button id='likert3'>Somewhat Difficult</button>
                <button id='likert4'>Neutral</button>
                <button id='likert5'>Somewhat Easy</button>
                <button id='likert6'>Easy</button>
                <button id='likert7'>Very Easy</button>
                <button id='likert11'>Never</button>
                <button id='likert21'>Rarely</button>
                <button id='likert31'>Occasionally</button>
                <button id='likert41'>Sometimes</button>
                <button id='likert51'>Frequently</button>
                <button id='likert61'>Usually</button>
                <button id='likert71'>Always</button>
                <button id='category1'>Finch</button>
                <button id='category2'>Jay</button>
                <button id='category3'>Oriole</button>
                <button id='category4'>Sparrow</button>
                <button id='category5'>Swallow</button>
                <button id='category6'>Thrasher</button>
                <button id='category7'>Vireo</button>
                <button id='category8'>Warbler</button>
                <button id='category1_test'>Finch</button>
                <button id='category2_test'>Jay</button>
                <button id='category3_test'>Oriole</button>
                <button id='category4_test'>Sparrow</button>
                <button id='category5_test'>Swallow</button>
                <button id='category6_test'>Thrasher</button>
                <button id='category7_test'>Vireo</button>
                <button id='category8_test'>Warbler</button>
                <button id='category1_dummy'>Finch</button>
                <button id='category2_dummy'>Jay</button>
                <button id='category3_dummy'>Oriole</button>
                <button id='category4_dummy'>Sparrow</button>
                <button id='category5_dummy'>Swallow</button>
                <button id='category6_dummy'>Thrasher</button>
                <button id='category7_dummy'>Vireo</button>
                <button id='category8_dummy'>Warbler</button>
                <button id='StateEntryButton'>Submit</button>
                <input id="StateEntry" name="StateEntry" value="" type = 'text' onfocus="this.value=''" value=""></input>
                  </div>
              <div style="text-align:center; align:center;">
              </div>
              <div class="slidecontainer">
                <input type="range" min="0" max="100" value="50" class="slider" id="myRange", onchange="updateTextInput(this.value)">
                <input type="range" min="0" max="100" value="50" class="slider" id="myRange2", onchange="updateTextInput(this.value)">
                <input type="range" min="0" max="100" value="50" class="slider" id="myRange3", onchange="updateTextInput(this.value)">
                <input type="text" id="textInput" value="">
                <p><span id="demo"></span></p>
              </div>
              <form id="form" onsubmit="return false;">
                <input   style=position:absolute;top:80%;left:40%;width:10%; type="text" id="userInput">
              </form>
              <form id="mturk_form" method="POST" action="https://dibs-web01.vm.duke.edu/AMTSubmit/dataHandler.php">
                <input type="hidden" id="assignmentId" name="assignmentId" value="">
                <input type="hidden" id="workerId" name="workerId" value="">
                <input type="hidden" id="hitId" name="hitId" value="">
                <input type="hidden" id="RTs" name="RTs" value="">
                <input type="hidden" id="demographics" name="demographics" value="SRlearn_salience">
                <input type="hidden" id="ExpName" name="ExpName" value="SRlearn_salience">
              </form>
            </td>
          </tr>
        </table>
      </html>
